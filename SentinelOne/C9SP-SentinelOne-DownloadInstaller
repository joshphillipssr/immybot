#Requires -Version 5.1
<#
.SYNOPSIS
    Downloads the SentinelOne installer using the platform-native, authenticated method.
.DESCRIPTION
    This script runs in the "Download Script" context for a software package linked
    to a Dynamic Integration. It leverages the built-in Get-IntegrationAuthenticatedDownload
    cmdlet, which automatically uses the authentication context established by the
    C9DIS-SentinelOne integration and the implicit $Url and $InstallerFile variables.
.NOTES
    Author:     Josh Phillips
    Created:    07/17/2025
    Version:    3.0.0 - Corrected to use parameter-less call as proven by diagnostic harness.
#>

# The C9DIS-SentinelOne integration provides the $Url and $InstallerFile variables in this context.
Write-Host "Starting installer download using integration-aware context."
Write-Host "Source URL is: $Url"
Write-Host "Destination File is: $InstallerFile"

Get-IntegrationAuthenticatedDownload

Write-Host "Download complete."